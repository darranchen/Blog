---
layout: post
title: 德州扑克胜率影响分析
tagline:
date: 2014-05-03
categories: Program
tags:  holdem  R
keywords:   holdem, Texas, R, 影响因子
discription: 
---

上一章介绍 [Git 分支][branch]的时候提到想要用新的工作模式，这里就是要应用想的模式. 最近刚好有玩到德州扑克这个游戏，对于这个游戏就不详细介绍了，如果想了解可以参照 [wiki德州扑克][holdem], 同时也刚好有在学随机过程的马可夫链，讨论了一个 [Gambler's ruin][gambler]（赌徒破产例子), 例子是这样的:

有一个赌徒，假设他手里现在有 $i$ 块钱， 每一次赌博都有 $p$ 的机会赢到1块钱，$q = 1-p$ 的机会输掉1块钱，他自己的打算是这样的，如果这次我输光了或者我这次赢到了 $N$ 块钱，那么他就不玩了， 也就是如果他输光了钱(0)或者赢到了 $N$ 块钱，这游戏就结束，这里关心的是假如他很贪心，设置 $N$ 到无穷大 ($N \rightarrow \infty$) , 根据随机过程的理论，如果 $p \leq \frac{1}{2}$ 那么经过无数多把赌博，那么他最终一定会输光， 反之，如果 $ p > \frac{1}{2}$ 那么最终会赢得无数的钱。 这就是随机过程有魅力的地方，随机过程讨论了当经过无穷多步或者很长很长时间之后，会发生什么样的情况。这个问题可以描述为2个玩家的赌徒破产问题.
        
  联系到德州扑克，如果只有两个人玩，确保每把赢的机率都能超过0.5，那么会不会到无穷大呢。理论归理论，还是需要实际玩一下的啊。 刚好微信的德州扑克可以提供这样的平台，这里每一把可以有6个或者9个游戏玩家，这个问题就成了n个赌徒的破产问题. 有一些论文可以 [参考][nplayer]，还没有看，但是可以合理想象，每一把投入的回报的期望值如果是超过1，也就是说，每一把赢的机会是0.21，其余5个人一起投下去，如果这把赢了的话收益是5，那么期望回报是1.05，这样子的话经过无数把牌之后回报也会是无穷大的。

虽然说实际情况可能会有所不一样，因为在玩德州扑克的话，对手如果觉得自己赢的机率（胜率)不大就会选择弃牌，那么期望回报可能没有那么大，但是在初级场，也就是赌注很小的时候，很多人是无论牌好坏都会跟着一起赌下去，那么这个时候就可以做这么一个判断，如果这把牌一开始的胜率是超过0.2的话，那么就全部梭了(all in)，如果小于就选择弃牌。这个就是为什么我觉得有可能可以一直赢下去的原因，并不是每一个人都是理性思考后作出判断的。

说下我一开始的目标和最终目标吧，一开始的目标其实就是想做一个自动的投注工具，第一次手牌发过来之后就可以自动判断胜率，根据自己的胜率决定梭还是放弃。最终目标就是收集到足够的信息之后，每一次都可以自动判断跟与不跟，这就是运用machine learning 的想法。目前这个牵涉到和游戏进行交互以及资料的收集，所以现在先在个人的电脑上面进行模拟。

先简单讲一下德州扑克的发牌机制，第一次每一位玩家会发两张底牌，这个时候可以喊注，这个时候就可以根据自己手上的牌计算胜率了，然后根据这个胜率进行判断是不是要喊注。关心这两张牌的胜率引起了我一些很有趣的思考，每一次看到手牌上面有一对的时候就会觉得格外兴奋，但是其实一对2跟一对10的赢牌的机率差距还是蛮大的，另外有的人也是看到手上有一张A也是格外开心，拿到一张K之后我就不敢跟了，是不是一张A 对胜率影响比较大，我现在就很想关心下面几个情景

1. 拿到一对对我的胜率影响有多大，拿到一对之后我的胜率是不是大了很多,大多少.也就是说我拿到一对2，会不会比我拿到2，3的胜率大很多。
2. 拿到大牌对我的胜率的影响程度有多大,也就是我拿到了一张A比我拿到一张K的胜率影响大多少
3. 拿到两张连牌造成的胜率影响有多大，经常看到了9和10之后有一个博取顺子的几乎，那么这两张牌差距的大小对我的胜率影响有多大。(其实第一个问题是这个的一小部分，因为两张一样差距为0)
4. 花色一样对我的胜率造成的影响有多大。两张同样花色的牌是不是胜率会比两张不同花色的牌大很多。

上面的问题都需要得到每两张牌的组合之后才能够知道任意两张牌的组合就有 $52\*51/2 =1326$ 种组合，其实对于胜率的影响，知道花色对于获胜的影响只是同花色会有一些影响，但是到底什么花色事实上对于关心的胜率问题是没有差别的，比如说现在看到梅花K和一张红桃A,跟我看到一张梅花K和一张黑桃A胜率会是一样的，在德州扑克里面不会有红桃会比黑桃大的比较。这个就是统计上面充分统计量的意义，也就是我们看到的信息是梅花K和红桃A, 以及梅花K和黑桃A,对于我们关心的胜率问题，只需要知道K和A是否同个花色就可以解决问题，那么这里就变成了是否同个花色的这个统计量的问题了，是否同个花色可以充分解决我们的问题，那么这里的组合数目就会变成同个花色的计算一次，不同花色的计算一次.组合数目就会变成了 $(13\*12)\*\frac{1}{2}+13\*13=247$ 种，这样模拟的数目就会少很多

我需要确定的模拟需要写胜负判断的程式来做，这个其实在 github 上面已经有人用python 写好了，我需要做的就是把它的input 和output 学会，然后就可以用了。


[gambler]: http://en.wikipedia.org/wiki/Gambler%27s_ruin
[nplayer]: http://www.sciencedirect.com/science/article/pii/S0196885804000363
[holdem]: http://en.wikipedia.org/wiki/Texas_hold_%27em
[branch]: http://blog.xjchen.net/book/2014/04/30/git3/
<!-- []: {{BASE_PATH}}/images/a.png -->
<!-- {%highlight html%} {%endhighlight%}-->

