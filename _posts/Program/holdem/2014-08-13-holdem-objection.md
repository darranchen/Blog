---
layout: post
title: "德州扑克项目的目的与解决方式"
tagline:
date: 2014-08-13
categories: Program
tags:  holdem 
keywords:  holdem
discription: 
---

在五月份的时候已经想做德州扑克这个项目了，可是前阵子迫于硕士论文的压力都没有时间在做，现在刚好有时间做了，而且有了新的想法，另一个角度就是强迫症，每次都是把一个东西想得很美好，也就是想法很好，但是却没有实现，如果再不实现自己也会鄙视自己，想法再好，执行力很重要，在这里就把我对于这个项目的目的和解决方案写下来，一步一步完成，即使没有完整完成，但是一步一步来就可以了。

先写下我的目的:

1. 对于拿到的前两张手牌的胜率建立模型，解决分析一些问题:
  * 拿到一对对子的胜率是不是会比拿到两张很大的牌胜率大很多
  * 拿到一对2 和一对3 之间胜率的差距会不会和拿到一对3 和一对4 之间的胜率差距一样
  * 拿到同个花色对于胜率能够大多少
  * 在判断的时候，都会考虑两张牌之间的大小关系，如果两张牌的大小差距小于等于3，这样子会容易拿到顺子，两张牌之间的关系对胜率影响到底有多大

2. 现在有一个叫 D3\.js 的东西，就是网页呈现统计分析结果，那么能不能做成一个网页，可以用鼠标点击两张牌就可以把他们的胜率呈现出来.

有了这两个目的，那么对应的解决方式就要一步一步来了。首先是建模方面的想法,对于德州扑克首先拿到的两张手牌，手牌的属性就有 大小数字和花色两种，会对分析造成一定影响的是 A，它其实比K（13）大，造成的影响后面建模的时候再考虑了。拿到这两张之后的结果只有三种，赢，平手和输。平手是个比较麻烦的问题，因为当人数比较多的时候，即使两个人平手也能分了别人输的钱，那么这个时候在计算胜率的时候可以考虑把平手的胜率平分掉，也就是如果有3个人，两个人平手赢了第三个人的话，那么这把如果赢的话只是赢了0.5， 如果全赢是赢2的，现在变成了0.5。所以这里就要确定结果 Y 到底是什么了，有两种选择，第一种选择是胜率，比如计算100把牌里面会赢多少把，另一种选择就是假设每个玩家都用1块钱出来投进去，那么这把的收益是多少，如果输了是1，有3个人的话，收益可能是2，或者0.5， 所以另一个选择就是期望收益，第一种选择会遇到平手的问题，虽然一般玩家都会考虑这把赢的机率是多少，但是更加合理的是这把投入之后，收益是多少，像我看 Poker star的实战玩家在投注的时候都喜欢投注底池里面全部金额的40\%， 因为这个数值刚好在这些专业玩家的预估收益和损失之间，这样对手就会在弃牌与跟注间徘徊，而不会瞬间秒退或者跟。总结一下:

建模的时候考虑的自变因素就是 两张牌的大小和花色，每张牌都可以用这样的组合来表示 $x, f$， $x$ 是牌的大小值，虽然A是1 但是这里想先用14来表示，因为它的价值实在是有点大,在玩家心里，A是14的份量其实会比看到A是1的份量重，重很多，把 $x$ 当作连续性变量。 $f$ 是花色，方块，梅花，红桃，黑桃 4种，那么分别用 $1,2,3,4$来表示，其实在建模的时候想要把两张牌的花色做一个 Indicator factor, 如果是相同的花色就是1，如果不同就是0，因为在德州扑克里面是不算花色大小的，所以只有相同与否，没有大小。 反应变数 $Y$就是期望收益，也就是投注1块钱之后，假设其他所有的玩家都一起参加，那么期望收益是多少。假如有 $n$ 个人，那么赢全部会获利 $n-1$ 块钱， 机率是 $p_1$, 另一个是平手，平手就会发生多种情况了，有2个人，3个人到 最多4个人平手，这个时候奖金平分，根据平手的人数奖金会有变化，2个人的话平分 $n-2$ 个人，每个人的收益就是 $\frac{n}{2}-1$, 如果是三个人的话，奖金就是 $\frac{n}{3}-1$, 四个人就是 $\frac{n}{4}-1$，他们的机率值分别为 $p_2,p_3,p_4$. 最后输的话损失就是1，机率为 $p_5$.我们要看的其实就是对于期望回报的影响因子到底哪些是关键的。

解决这个问题的第一步就是资料获得，这个就是用人家已经写好的python的代码，然后使用 Monte Carlo 的方式获得对应手牌的期望收益值，有了这些期望收益之后再进行建模，所以目前第一步就是怎么用python的代码得到我要的信息

之后就是用R进行建模，建模过程就暂时忽略过去，因为要看模型fitting 的情况做决定

再来就是需要用 D3\.js 做一个互动的网页，这个就是自己学习 D3\.js 怎么制作之后尝试一下，先完成第一步再来。

<!-- []: {{BASE_PATH}}/images/a.png -->
<!-- {%highlight html%} {%endhighlight%}-->

